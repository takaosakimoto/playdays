<ion-navbar primary *navbar>
  <ion-title>CHATS</ion-title>
  <ion-buttons end>
    <button (click)="openChatroomNewChatModel()">
      <ion-icon name="ios-add-outline"></ion-icon>
    </button>
  </ion-buttons>
</ion-navbar>

<ion-content class="chatroom-index-page">
  <button ion-item detail-none *ngFor="let chatroom of chatrooms" (click)="goToChatroomShowPage(chatroom)">
    <ion-avatar item-left>
      <img [src]="chatroom.pictureUrl" class="chatroom-index-page-img"/>
    </ion-avatar>
    <h2>
      {{ chatroom.name }}
    </h2>
    <p *ngIf="chatroom.lastChatMessage" class="chatroom-index-page-last-message">
      {{ chatroom.lastChatMessage.textContent }}
    </p>
    <span item-right class="chatroom-index-page-last-message-at-container">
      <ion-badge
        *ngIf="chatroom.unreadCount && chatroom.unreadCount"
        class="chatroom-index-page-unread-badge"
      >
        {{ chatroom.unreadCount }}
      </ion-badge>
      <center *ngIf="chatroom.lastChatMessage">
        {{ lastChatMessageDateFormat(chatroom.lastChatMessage.insertedAt) }}
      </center>
    </span>
  </button>
</ion-content>
